<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Distance Test </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <style>
        #rect1 {width:150px; height:200px;}
        #rect2 {width:50px; height:100px;}
    </style>
    <script>
        $(function() {
            $('.ui-widget-content').draggable().resizable();
            $('.ui-widget-content').mouseup(function(e) {
                var t1 = $('#rect1').position().top, l1 = $('#rect1').position().left;
                var w1 = $('#rect1').width(), h1 = $('#rect1').height(), r1 = l1 + w1, b1 = t1 + h1;
                var t2 = $('#rect2').position().top, l2 = $('#rect2').position().left;
                var w2 = $('#rect2').width(), h2 = $('#rect2').height(), r2 = l2 + w2, b2 = t2 + h2;

                // Centroid Distance
                var cx1 = l1 + 0.5 * w1, cy1 = t1 + 0.5 * h1;
                var cx2 = l2 + 0.5 * w2, cy2 = t2 + 0.5 * h2;
                var centDist = Math.sqrt(Math.pow(cx1 - cx2, 2) + Math.pow(cy1 - cy2, 2));

                // Gap Distance
                var hGapDist = Math.min(Math.abs(l1 - l2), Math.abs(l1 - r2), Math.abs(r1 - l2), Math.abs(r1 - r2));
                var vGapDist = Math.min(Math.abs(t1 - t2), Math.abs(t1 - b2), Math.abs(b1 - t2), Math.abs(b1 - b2));
                var hSign = Math.abs(cx1 - cx2) > 0.5 * (w1 + w2) ? 1.0 : - 1.0;
                var vSign = Math.abs(cy1 - cy2) > 0.5 * (h1 + h2) ? 1.0 : - 1.0;
                var gapDist = Math.max(hSign * hGapDist, vSign * vGapDist)

                // Hausdorff Distance
                var hd = function(l1, t1, r1, b1, cx1, cy1, l2, t2, r2, b2, cx2, cy2) {
                    if (l1 >= l2 && r1 <= r2 && t1 >= t2 && b1 <= b2)
                        return 0.0;
                    if (l1 <= l2 && r1 >= r2 && t1 <= t2 && b1 >= b2)
                        return 0.0;
                    var deltaX = cx1 < cx2 ? l2 - l1 : r2 - r1, deltaY = cy1 < cy2 ? t2 - t1 : b2 - b1;
                    if (l1 >= l2 && r1 <= r2)
                        return 1.0 * Math.abs(deltaY);
                    if (t1 >= t2 && b1 <= b2)
                        return 1.0 * Math.abs(deltaX);
                    return Math.sqrt(deltaX *deltaX + deltaY * deltaY)
                }; // var hd = function(...) { ... };
                var hausDist = Math.max(hd(l1, t1, r1, b1, cx1, cy1, l2, t2, r2, b2, cx2, cy2),
                                        hd(l2, t2, r2, b2, cx2, cy2, l1, t1, r1, b1, cx1, cy1));

                // Relative Hausdorff Distance
                var rhd = function(l1, t1, r1, b1, cx1, cy1, l2, t2, r2, b2, cx2, cy2) {
                    var w1 = r1 - l1, h1 = b1 - t1;
                    if (l1 >= l2 && r1 <= r2 && t1 >= t2 && b1 <= b2)
                        return 0.0;
                    if (l1 <= l2 && r1 >= r2 && t1 <= t2 && b1 >= b2)
                        return 0.0;
                    var deltaX = cx1 < cx2 ? l2 - l1 : r2 - r1, deltaY = cy1 < cy2 ? t2 - t1 : b2 - b1;
                    if (l1 >= l2 && r1 <= r2)
                        return 1.0 * Math.abs(deltaY / h1);
                    if (t1 >= t2 && b1 <= b2)
                        return 1.0 * Math.abs(deltaX / w1);
                    return Math.sqrt(deltaX *deltaX + deltaY * deltaY) / Math.sqrt(w1 * w1 + h1 * h1);
                }; // var rhd = function(...) { ... };
                var relaHausDist = Math.max(rhd(l1, t1, r1, b1, cx1, cy1, l2, t2, r2, b2, cx2, cy2),
                                            rhd(l2, t2, r2, b2, cx2, cy2, l1, t1, r1, b1, cx1, cy1));

                $('#out').text(centDist + '; ' + gapDist + '; ' + hausDist + '; ' + relaHausDist + '\n');
            }); // $('.ui-widget-content').mouseup(function(e) { ... });
        });
    </script>
</head>
<body>
    <div id="out" style="border:solid 1px;"></div>
    <div id="rect1" class="ui-widget-content"></div>
    <div id="rect2" class="ui-widget-content"></div>
</body>
</html>
